lexer grammar ZLangLexer;

// -------------------------------------------------------------------------
// Scope delimiter
// -------------------------------------------------------------------------

FENCE     : '```';

// -------------------------------------------------------------------------
// Keywords
// -------------------------------------------------------------------------

FN        : 'fn';
RETURN    : 'return';
IF        : 'if';
ELSE      : 'else';
WHILE     : 'while';
FOR       : 'for';
BREAK     : 'break';
CONTINUE  : 'continue';
TRUE      : 'true';
FALSE     : 'false';
NULL      : 'null';
TYPEOF    : 'typeof';

// Type keywords
TYPE_NUMBER  : 'number';
TYPE_STRING  : 'string';
TYPE_BOOLEAN : 'boolean';
TYPE_VOID    : 'void';

// -------------------------------------------------------------------------
// Operators
// -------------------------------------------------------------------------

PLUS          : '+';
MINUS         : '-';
STAR          : '*';
SLASH         : '/';
PERCENT       : '%';
ASSIGN        : '=';
PLUS_ASSIGN   : '+=';
MINUS_ASSIGN  : '-=';
STAR_ASSIGN   : '*=';
SLASH_ASSIGN  : '/=';
EQ            : '==';
NEQ           : '!=';
LT            : '<';
GT            : '>';
LTE           : '<=';
GTE           : '>=';
AND           : '&&';
OR            : '||';
NOT           : '!';

// -------------------------------------------------------------------------
// Delimiters
// -------------------------------------------------------------------------

LPAREN    : '(';
RPAREN    : ')';
LBRACE    : '{';
RBRACE    : '}';
LBRACKET  : '[';
RBRACKET  : ']';
SEMI      : ';';
COMMA     : ',';
DOT       : '.';
COLON     : ':';
ARROW     : '=>';

// -------------------------------------------------------------------------
// Literals
// -------------------------------------------------------------------------

NUMBER
    : [0-9]+ ('.' [0-9]+)?
    ;

STRING
    : '"' (~["\\\r\n] | '\\' .)* '"'
    | '\'' (~['\\\r\n] | '\\' .)* '\''
    ;

// -------------------------------------------------------------------------
// Identifiers (supports Chinese / CJK characters)
// -------------------------------------------------------------------------

IDENTIFIER
    : [a-zA-Z_$\u4e00-\u9fff\u3400-\u4dbf]
      [a-zA-Z0-9_$\u4e00-\u9fff\u3400-\u4dbf]*
    ;

// -------------------------------------------------------------------------
// Newline (significant for automatic semicolon insertion)
// -------------------------------------------------------------------------

NEWLINE
    : ('\r\n' | '\r' | '\n')+
    ;

// -------------------------------------------------------------------------
// Whitespace & Comments (skipped)
// -------------------------------------------------------------------------

WS
    : [ \t]+ -> skip
    ;

LINE_COMMENT
    : '//' ~[\r\n]* -> skip
    ;

BLOCK_COMMENT
    : '/*' .*? '*/' -> skip
    ;
